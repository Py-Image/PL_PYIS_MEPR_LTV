"use strict";!function(e){location.origin||(location.origin=location.protocol+"//"+location.host);var t={init:function(){var a,r=500;e(".tablenav-pages a, .manage-column.sortable a, .manage-column.sorted a").on("click",function(a){if(a.preventDefault(),"undefined"!=typeof this.search)var r=this.search.substring(1);else var r="";var n={event:"sort",paged:t._query(r,"paged")||e('input[name="paged"]').val(),order:t._query(r,"order")||e('input[name="order"]').val(),orderby:t._query(r,"orderby")||e('input[name="orderby"]').val(),s:t._query(r,"s")||e('.search-box input[name="s"]').val()};e(this).parent().hasClass("pagination-links")&&(n.event="paginate"),e(this).hasClass("first-page")&&(n.paged=1),t.update(n)}),e("input[name=paged]").on("keyup",function(n){13==n.which&&n.preventDefault();var o={event:"typed_page",paged:parseInt(e(this).val())||1,order:e('input[name="order"]').val()||"asc",orderby:e('input[name="orderby"]').val()||"title",s:e('.search-box input[name="s"]').val()||""};window.clearTimeout(a),a=window.setTimeout(function(){t.update(o)},r)})},update:function(a){a._ajax_nonce=e("#_pyis_mepr_ltv_nonce").val(),a.action="pyis_mepr_ltv_list",e('input[name="paged"]').val(a.paged),e('input[name="order"]').val(a.order),e('input[name="orderby"]').val(a.orderby);var r=document.location.search;r=t._update_url(r,"paged",a.paged),r=t._update_url(r,"order",a.order),r=t._update_url(r,"orderby",a.orderby),r=t._update_url(r,"s",a.s),history.replaceState(void 0,void 0,r),e.ajax({type:"POST",url:location.origin+ajaxurl,data:a,success:function(a){a.success&&a.hasOwnProperty("data")&&(a=a.data,a.rows.length&&e("#the-list").html(a.rows),a.column_headers.length&&e("thead tr, tfoot tr").html(a.column_headers),a.pagination.bottom.length&&e(".tablenav.top .tablenav-pages").html(e(a.pagination.top).html()),a.pagination.top.length&&e(".tablenav.bottom .tablenav-pages").html(e(a.pagination.bottom).html()),e("table.wp-list-table tr").hover(function(t){e(this).find(".mepr-row-actions").css("visibility","visible")},function(t){e(this).find(".mepr-row-actions").css("visibility","hidden")}),t.init())},error:function(e,t,a){console.error(e.responseText),console.error(a)}}).done(function(t){if(t.success&&t.hasOwnProperty("data"))if("sort"==a.event)e(".column-"+a.orderby).effect("highlight",{color:"#DFF2BF"},1e3);else{var r=e(".wp-list-table");r.removeClass("striped"),r.find("tbody#the-list").effect("highlight",{color:"#DFF2BF"},1e3,function(){r.addClass("striped")})}})},_query:function(e,t){for(var a=e.split("&"),r=0;r<a.length;r++){var n=a[r].split("=");if(n[0]==t)return n[1]}return!1},_update_url:function(e,t,a){var r=e.indexOf("#"),n=r===-1?"":e.substr(r);e=r===-1?e:e.substr(0,r);var o=new RegExp("([?&])"+t+"=.*?(&|$)","i"),i=e.indexOf("?")!==-1?"&":"?";return e=e.match(o)&&""!==a?e.replace(o,"$1"+t+"="+a+"$2"):""==a?e.replace(o,""):e+i+t+"="+a,e+n},refresh:function(a){var r=a.currentTarget;e(r).val();e(r).val(pyisMeprLtv.i18n.flushProcessing);var n={_ajax_nonce:e("#_pyis_mepr_ltv_nonce").val(),action:"pyis_mepr_ltv_flush"};e.ajax({type:"POST",url:location.origin+ajaxurl,data:n,success:function(t){t.success&&t.hasOwnProperty("data")&&(t=t.data,e(".transient-expiration").html(t.expiration))},error:function(e,t,a){console.error(e.responseText),console.error(a)}}).done(function(t){t.success===!0&&t.hasOwnProperty("data")?(e(r).val(pyisMeprLtv.i18n.flushSuccess),e(".transient-expiration").effect("highlight",{color:"#DFF2BF"},1e3),setTimeout(function(){e(r).val(pyisMeprLtv.i18n.flushDefault)},1e3)):e(r).val(pyisMeprLtv.i18n.flushError)}),n.paged=e('input[name="paged"]').val(),n.order=e('input[name="order"]').val(),n.orderby=e('input[name="orderby"]').val(),n.s=e('.search-box input[name="s"]').val(),n.event="flush",t.update(n)}};t.init(),e("#pyis-mepr-ltv-table").on("submit",function(a){a.preventDefault();var r={event:"search",paged:1,order:e('input[name="order"]').val()||"asc",orderby:e('input[name="orderby"]').val()||"title",s:e('.search-box input[name="s"]').val()||""};t.update(r)}),e(".flush-transients.button").on("click",function(e){e.preventDefault(),t.refresh(e)})}(jQuery);
//# sourceMappingURL=admin.js.map
